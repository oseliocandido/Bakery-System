<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bakery Avenida</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="icon" type="image/x-icon" href="/images/favicon.ico">
</head>
<body>
  <nav>
    <h1>Funcionários</h1>
    <ul>
        <li><a href="#show"   id="show-employees">Funcionários</a></li>
        <li><a href="#create" id="create-user">Cadastrar</a></li>
        <li><a href="#update" id="update-user">Atualizar</a></li>
    </ul>
  </nav>
  <div id="all-employees" class="section">
    <ul>
      <!-- Header Row with Field Names -->
      <li class="header">
        <div><strong>Numero de Identificação</strong></div>
        <div><strong>Nome</strong></div>
        <div><strong>Data de Nascimento</strong></div>
        <div><strong>Data de Admissão</strong></div>
        <div><strong>Cargo</strong></div>
        <div><strong>Telefone</strong></div>
        <div><strong>Observação</strong></div>
        <div><strong>Status</strong></div>
      </li>
    
      <!-- User Row 1 -->
      <li>
        <div>12345</div>
        <div>John Doe</div>
        <div>1990-01-01</div>
        <div>2015-01-01</div>
        <div>Manager</div>
        <div>123-456-7890</div>
        <div>Regular employee</div>
        <div><span class="status-box active">Active</span></div>
      </li>
    
      <!-- User Row 2 -->
      <li>
        <div>12346</div>
        <div>Jane Smith</div>
        <div>1992-02-01</div>
        <div>2018-03-01</div>
        <div>Atendente</div>
        <div>234-567-8901</div>
        <div>Excellent performance</div>
        <div><span class="status-box inactive">Inactive</span></div>
      </li>
    
      <!-- Additional user rows can follow the same structure -->
    </ul>
    
  </div>
  
  <div id="createUser" class="section container-create-user" style="display: none">
    <form class="user-form">
      <label for="name">Nome</label>
      <input type="text" id="name" placeholder="Nome" required>
      <label for="role">Cargo</label>
      <select id="role" name="options">
        <option value="Option 1">Atendente</option>
        <option value="Option 2" selected>Caixa</option>
        <option value="Option 3">Cozinheiro</option>
      </select>
      <label for="dob">Data de Admissão</label>
      <input type="date" id="dob" required>
      <label for="doa">Data de Nascimento</label> <!-- Fixed duplicate label issue -->
      <input type="date" id="doa" required>
      <label for="telephone">Telefone</label>
      <input type="text" id="telephone" placeholder="(XX) XXXXX-XXXX" required>
      <label for="observation">Observação</label>
      <input type="text" id="observation">
      <button type="submit">Create User</button>
    </form>
  </div>

  <div id="updateUser" class="section container-create-user" style="display: none">
    <form class="user-form" onsubmit="updateUser(event)">
      <label for="update-numero_identificacao">Id</label>
      <select id="update-numero_identificacao">
      </select>
      <label for="update-name">Nome</label>
      <input type="text" id="update-name" required>
      <label for="update-role">Cargo</label>
      <select id="update-role" name="update-role">
        <option value="Auxiliar de Padeiro">Auxiliar de Padeiro</option>
        <option value="Atendente de Caixa">Atendente de Caixa</option>
        <option value="Cozinheiro">Cozinheiro</option>
        <option value="Padeiro">Padeiro</option>
      </select>
      <label for="update-dob">Data de Admissão</label>
      <input type="date" id="update-dob" required>
      <label for="update-doa">Data de Nascimento</label>
      <input type="date" id="update-doa" required>
      <label for="update-telephone">Telefone</label>
      <input type="text" id="update-telephone" required>
      <label for="update-observation">Observação</label>
      <input type="text" id="update-observation">
      <label for="update-status">Status</label>
      <select id="update-status">
        <option value="Ativo">Ativo</option>
        <option value="Inativo">Inativo</option>
      </select>
      <button type="submit" onsubmit="">Update User</button>
      <div id="notification" class="notification" style="display: none;"></div>
    </form>
  </div>

  <script type="module">
    import { showSection, fetchEmployeesOnLoad, handleUserSelection, updateUser } from './get_users.js';

    // Add event listeners for navigation links
    document.getElementById('show-employees').addEventListener('click', () => showSection('all-employees'));
    document.getElementById('create-user').addEventListener('click', () => showSection('createUser'));
    document.getElementById('update-user').addEventListener('click', () => showSection('updateUser'));

    // Add event listener for user selection
    document.getElementById('update-numero_identificacao').addEventListener('change', handleUserSelection);

    // Add event listener for update form
    document.getElementById('updateUser').addEventListener('submit', (event) => {
      event.preventDefault();
      updateUser(event);
    });


    // Fetch employees on page load
    fetchEmployeesOnLoad();
  </script>
</body>
</html>